//
//  Test.m
//  POS4iPhone_PeoplePay
//
//  Created by  STH on 5/13/14.
//  Copyright (c) 2014 文彬. All rights reserved.
//

#import "Test.h"
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <memory.h>

@implementation Test

int ppp(){
	char *hex = NULL;
	char *bin = "7719abddab705fdfa19060520335d0afed617d7297115a1e4fc03a7846446c6b6e55bfb8d401ebc10ee1105710f5a3437bd2be8543c7db5990470d160f4a834dd3336a5dce1f7a51726438f71d2fabcdffca77f926b810a2b762354a3902c41027cbfde796725ae888fe2fafb6365913cb371553d2402fc8091dda0e9a5a4ffdfd318531ebb3481c3ff2f9783599b5b1bdb3ac9d79310875f5fcc82804f910e5e46575707501e521c7c5f8745795af712415a5ad586974fe192c1c624a8f0b7a4f7ada54982092eed70783766a65b476cdc9605554d7660f75c1d7aa84fe4cc0b6b3ee0ac3e230ba57ab7d8deb9e9fe77126fae62895e0b5c7bd5344298cc3996055fab6d3aa54ed139729572a9bc63795a465381ae6b1b1fc67feb8934b42d8ad09741559fd89e2edfa94dccadb1688969a0daaf0c3c6e1a980df5435410f6404b3002b31626c344b6abe15b39c0e35dae8ec3ddf619dfbeb9d2311072a022ecce1a3ac381543a32a1fe332db05c8e49349df689ca93174fbd2ab7e98180d9b17fa9eeb15ae842f58bda717b1bf578420fb7661bc9018ee24856bb5827dde2fdfca6cb0d4eb1591f15c5683749a82fff0d16edc9a636b2f3c53feb248333e6282539fbd911984a370649e723aef62599fc051a3de2ac6750a117441ed7223894fd2db69eaf95223e2c0b9bb6797f743d2dde18ffc9431b6990951e807d460094265bb8ef85322a1ed3f8f8914039790806acfac5178fe602ec6046cf7a64d0c17cea9875aa8791b7f8bf26704f5cc14cac60ff7aa1c3bee39e5a02121347f0d7b074721bfd54d74de2fb4b36ea8932e6e09a6c6fa1ce5f65e1eb0260165430e6cab7ca4ff2bf197a37e851b520ca53d8117ba6ebbf104b0c5b6f7c9523e6b64eb5572ac8cf9d06f566f6e632b5d181bc7ad0cf3dd02831da6c3490a5673c120c2cd2e2c63604fcc3f822fc824c2de6cab87b339e93634c1b56cd5b8c550ae13a918fa7d0cb4c9a948c93ab510212c5adbafe1afe890149bc5a770f6bcbdf3dd1f2673e6647f7fd88ff6155759adcf63cf5d2d69d3de0e8a571cf5124e33034f0c2bbe16d240e1046ca55c1d7d826abeaa71725c99eef262eb5688195aaccf5365186352a1e54068b1cc279869e275091ff20ca62320b20401fec3762b7c2ad04aa4c4fee948e655528b566e1c3938d2b18d7aee06919af6ad247ecdbe1ba79a3f4188b867e6660469f8ae5dee3108161ff855c4c76a72560c50dc5a803e754668b36d49b526ba8e83d47a03d59fb45026b335edba1ee8e86c1b788619cf6d1681380766c690bc60f6f06b591a0c439babda0d203d881aa411054bb252e518a18d76bb5e69c96fc694f94f65cf893f655845ea3cd9bdd74bb0adaaea0dcf963ba9db824730be064aeffa4a4ec7e90e71e2cdac93400a8bd9f3085829c8e2568427dda4cea695385a55541177a65c11dca575e5d7a2f470e656d0d7ad5e94afc0d1e9ad6a28d4dc6cbe81a0ca318cd753ea37473f2ef2409ab3cf40d67aef90c156e7ca6b1f4d1c3768dbb47d718984f08e3ca3cf65626a803c6649635142fdf1d772beae8b192c183a70e257b93b324538379dd68b38b3332d25e78ab1aa49cffa16a749f2d19a34e2c60490fea8319b88412ed49770531af3f205dab70d9866975c1586787528ea71c8059966c0aa50cc6ce0494d54101a8588849f4a8a17bed53e9cb4fa0d2cbb9ade2c8c480deab45bb06b08629b705af8116ce29c1107a956f5602d61500ba1803bdc2d918970fb614e6649f2d8f22526ac46d3aa79fd3e9140ca168968628057b68e4a476755eac9df98194e628c66bf92c75a1af5d94eb7f27883273d637e7cca708abecaac5f4ac87033aedfa706e171b7154fb06c7dac59a59a74f00f694bc9f1ac9c1b594965974a017405bc36afb9359866f1c6a08a27cc27f59612070f76f7b1705ed7e2b91212a4a84e727deaed2689527825e3240ccc674b4072b0aa7516e5512095bcc25ce8b8d11773f11103d2b0632ac64aa647c7b366ae5bf109bad7c2b9a7cc0339a78231e376107d52b7c9aa3dc2b1866d37b590c971a02a05291a4d105aae43973fe39b9d02b22178e419e7c2182821ebce195233cabad303e94bec30187bcb7cf9a8e7ab868673a8c9ad2a54a72bd64b4a19067909b794e2d3667c879960c4a7d62efb2e61c0933517c36f800e1b00b2329d240a4f74402da3b967d5729cbf90f14ebd9eb616f35142c934c30ff7502bb405ec3f7bfb2bb6da18cab02abb4d6eaf3f385e2a18117a65917486828dfeaf99d019cd70961024ea2b06e5ae4d3fb104e1560a88f2e5dd16a69ce461e8d3fdf02dbfbb74793944119ca5751cd632d370d930a05227e922fc37702f5e04425108e4f52484b434422c9583412fcd9afdc7654d3d8ade9940acf634a983f19220db3cac29d098a6259e98443dd5aed7aaed1f09a9975b8d34971543af11c76999f0abb69d986bd0354e33a1712a7a4e536d02ca0d3dd3c6a38c80b1d3ed5488df5977369402f29a773837fe8d522216599cdaeb5b8894b6271ce095af9cbf182074ad1e2f0162c546ea8cc8616068798dc0689e0f5e3ac3eb6d25797e6c11330b5eaa40578c3adfaf01c6b3c14b4646c1263ed30bda8c50a4e04bfc6065a675da767d633496efbc3aadbe4a122dd5d731ed8de537ab3b14486eac2687707267887c9d3e637c2689c95fad35091ce9c6692a4c211cf1cdac542b56d90e46e95bb4114cd7e520f18588f544be142b9c80466fc3e167fd6bae3c9e05b9396a75860cea02441b28e1286371d2bc4f0dcd7f4bfcce66d4ba4fa40a8b53ee50fc4e0818cf7f110b829f47f82c740ba68aeceaf29131864128809baef869b99f741dd41a40a96e9ca2ad22cdd3d1b8791f4e1f4ce0549e2ee3fbc005ce189f4711a4e1e6ac2f87e8ff294e1fab000b16acd900bdfa878a65d3771f095449971d7bde87f18e7f89ff6032620e8ceb46ce6c743e7f2924108ea134b69cd297193858fcfa5245f6ef80272006de861a2047aee7ecfc0964545260d3e83bab5341ab388980a0c676f457d7079dbab01e485db895a44805ed0412ad5fdb86ae08abcd4df701ecdc9d844190d29aaa47cf5b0d9e768ec34aa178d98dcc23c71cb106de94d93cb9b0e51c31029757f01b506dbdf084e197f161ef2ea6f7f6fe2786e1c624bb4f13fc5a4c48829b756686452a3d5117fe7db33293ebcde7403134f1bfb437c772824aa28312d7c2a68b2da1d1e7a9e01a05d8d2b3e1e28d06e3453bc5e29cebeda0e0c50012cb865fa72339d03750cac312a4fc83b16af371ab29d7f0909bdd2edef44dae3f617c038cccd3e92dfef032097a8692a64f30ad8f32be8dae7d0dfcaea8a8e1c47a146b64ddceefd10dc6484530890323949a22d45ecbf6d2c931e777b52442330838c16b73d584b2374fee75d73ffa53d291fb279e9185bf8d5440792e3858cc1cc4f5155cc64abfccac729905db17e3f6947ff1e5c008bae5c973da5d1198ddafd844703df0f797cf8c10e4d0a3ee521614d3108be0e9ca7973da6b8ce64ba9b8ac91ac8e607c5ac7e049edfa9978d121f4a41a9e7ac3681bb06949d7608cdeb4bd44fe88172d41504ba04e3a62d928f96ea1c53a3ebc5b199e1d04104f2ccb89ea56e454e67430a6efb87028ac622ca56b4083bc2cffe5cdb24d74e7338da2c0ffb999d435d966847eb0f2d4c8152031fee277438422cb30b25d2bbe16b60a632f429c02013f6c4b5cf763d93034d9fba426424a398b2f83e383a89a1c0189b723b4a82ca36fe89c08068a02e6633f92122216924e0be7dd239ed0adf0d3252b6a0e6e5acd85144ba0b06dcbbf6c3f65bd955e76a98dc5e20e630a4edd7d5e3ce2a597398edd5197e5ceb78df7ed016847f449915c661531fcd3c001f93a4ac55a8de924d52e6754fb64617ea96042d54c87525070c00bf65dc78c1497da70c22b675b76a73a7fb6bc86e4cf2181696bcfca5e5dbd7e800d3f82f5e2347c38693923b2ddb9b36d5f37214c4b6644080b1d85d506abb9e242bad5305f23e219dd0745b87a711e6c66ea1e7c38162276b08a97e10d291210b48f0a2098922130d112d002bfb4465d212e424a5fd68d9b6202dd5849d56ca971a6ef9eaf259adbd4c43ebbd9470837358e281e2042be6a2de9f7cd8de85ecbf6963fefc14bea3f6109906c3378f9101858ffbc7e3818adb6f111931bacfd62082ba9ce2c3039c2302ba05825f6e0d4de0bfb60dcd3f9773d36e503468d111e9c83b0a7e50af3f8e842317c4f5d93afa3c1402eb72206eae1c2e034240e425c7701a5fb31ac5e6690ee3fe9ebd325dbc1ca7f595d250fbad813ae5a8d63562b5667c3aff230a8ff970415ca2a68da8e3cfefe892eeca46b38baa0efda902e6f91f937c9841eebf42fb75bb85a80922200807127113c47d0dd5aeb9d15f2b248bddbf74ae11afa2bc19a77379bba8ac6a74ea0197d6def11771912372f88514631f8a9de2ac498595787bf8ba68e7310ade65b2fa83495888a43dc0c04b5d4a26e6731a36136e20056fe001ad460e983e4ae2bfc3627386d3a2ad45275644791724edf2b20db5f505d0d759d35fbd952ad03cb45613670c98659cf02bc8a53630800254ca8273638762a1c3e22b51c3284c222fb56fc81fc9f2b4bb4fb7f1296bf0bc8251a0e6d44fcaa5cfc9073cb0fcf4bb9f94695d18718f72f666d606327a882bdc40ece5b3c15007f45115938302ada99819acfb6945ae51650e37019a03c4da5782708961176374c0be902239d6f4038d1ef922ddf2125896ff769e9eca50d96f3499113deba66eb6ec26061cb065ab4f7ec83eab05f453f6c4dd5888c820bcdcdb5688f4050ea567ad92eaa472c0619381b72a7c0f381f7627cdd89dc75252a9d399d4e3fc8adc85f9ee516275fd87167d986a0df264b86f8426bd49e571a8678b0fa2843318020a8b447d0b2ee9167e2a53dee90e576fa3993306dd6457728f1717b9ece24de10c7fd78179e6d9ded9cd147e55bb2627f8f3723c1b71b78cf60027a816756f83e65076f0f90187448a8a20ffe3d457112d8d0640a46f5fdcb2b7f5b67c50bd7a90eb20aecdeee81fb94ccfb9315cc16d123c6bf46b2a813f75101f0073449e30028020befbb79921dd420dee7a8dce44efb438f07b9ada4b6f61b7d2dda7821cc77adf09d333c6d2c553a7f63956a0641c1dcaf74e8ac1d4deecfca43dfda027cf514e5e23eeee92d39e8ad4bc6c0989295e5743d3eebffd25963eca35398ab175563864a525684d6319999d5d9161daae7c8faedaa04aa4d9a8a4b0e6c5108381ec4dcd7a3396b6e2b5024d5879ea9cdc6c566884ec471abff750c600a0acf1923c53127831a0b97c2ae2ad349024d95177498271fc2b27ff3d5c947a589546c8de36911f30c5f4297d6fa7c2c47752a2093ea9f63f087e91ad2b772c2f7659c9e8a1b54aeb6c1627c2d8da2ff9bf30d10723428fe0a7288348ae04613f0c295a4123bd8563cfb84d164e825b7b6d429e149595db5bb1b7251e394f79bf768e53e5e9678097daedc06d75a35abc9ab2a5a7f4c58bce7d6771f837b5373f3ac2f5b3c2e764496e2829a291f4442bf69314b5cbf5d8acb271c2e156775ea5514ee1051e105a2fc579fb9aaf9be845e166d26354779773a2c952672714eba35eb1271a443d45a51eea182421dfee9fa34de7bc0d5628bd6827a2d544e212becd0645ed387fc0ef77f0527977222f6a486e5cac14e25201620b3";
    
	hex = malloc(strlen(bin)*2+1);
	memset(hex,0,strlen(bin)*2+1);
    
	sprintf(hex,"%s\n",bin2hex1(bin,strlen(bin)));
    
	printf("==========%s",hex2bin1(hex,strlen(hex)));
	return 0;
}
char *bin2hex1(char *bin,unsigned int bin_len)
{
	int pos = 0;
	int offset = 0;
	char *hex;
	hex = malloc(bin_len * 2 + 1);
	memset(hex,0,bin_len * 2 + 1);
	while(pos < bin_len)
	{
		offset += sprintf(hex + offset,"%02x",(unsigned char)bin[pos]);
		pos++;
	}
	return hex;
}
char *hex2bin1(char *hex,unsigned int hex_len)
{
	int pos = 0;
	int offset = 0;
	long long_char;
	char *endptr;
	char temp_hex[3] = "\0\0";
	char *bin;
	bin = malloc(hex_len/2 + 1);
	memset(bin,0,hex_len/2 + 1);
	while(pos <= hex_len)
	{
		memcpy(temp_hex,hex+pos,2);
		long_char = strtol(temp_hex, &endptr, 16);
		if(long_char)
		{
			offset += sprintf(bin + offset, "%c", (unsigned char)long_char);
		}
		else
		{
			offset++;
		}
		pos += 2;
	}
	return bin;
}


@end
